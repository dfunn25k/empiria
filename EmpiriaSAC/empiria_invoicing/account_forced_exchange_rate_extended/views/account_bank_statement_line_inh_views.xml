<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="0">
        <record id="view_account_bank_statement_line_forced_exchange_rate_inh_form" model="ir.ui.view">
            <field name="name">view.account.bank.statement.line.forced.exchange.rate.inh.form</field>
            <field name="model">account.bank.statement.line</field>
            <field name="inherit_id" ref="account_accountant.view_bank_statement_line_form_bank_rec_widget" />
            <field name="arch" type="xml">
                <!-- 
                <xpath expr="//form" position="inside">
                    <field name="company_id" invisible="1"/>
                </xpath>

                <xpath expr="//group/group/field[@name='partner_id']" position="after">
                    <field name="related_invoice_id"
                        string      = "Factura relacionada"
                        options     = "{'no_create': True, 'no_open': True}"
                        attrs       = "{'invisible': [('partner_id', '=', False)]}" 
                        invisible   = "1" />
                </xpath> 
                -->

                <xpath expr="//group/group/field[@name='amount']" position="replace">
                    <label for="amount"/>
                    <div name="amount_div" class="o_row">
                        <field name="amount" attrs="{'readonly': [('is_reconciled', '=', True), ('amount', '!=', 0)]}" />
                        <field name="currency_id" required="1" groups="base.group_multi_currency" options="{'no_create': True, 'no_open': True}" />
                    </div>

                    <field name="exchange_rate" 
                        string      = "Tipo de Cambio" 
                        digits      = "[12,6]" />

                    <field name="to_force_exchange_rate"
                        string      = "Forzar T.C."
                        digits      = "[12,12]" />
                </xpath>
            </field>
        </record>

        <record id="view_account_bank_statement_line_forced_exchange_rate_inh_tree" model="ir.ui.view">
            <field name="name">view.account.bank.statement.line.forced.exchange.rate.inh.tree</field>
            <field name="model">account.bank.statement.line</field>
            <field name="inherit_id" ref="account_accountant.view_bank_statement_line_tree_bank_rec_widget" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='amount']" position="after">
                    <field name="exchange_rate" 
                        string      = "Tipo de Cambio" 
                        digits      = "[12,6]" 
                        optional    = "show" />

                    <field name="to_force_exchange_rate"
                        string      = "Forzar T.C."
                        digits      = "[12,12]" 
                        optional    = "show"
                        attrs       = "{'readonly': [('is_reconciled', '=', True),('amount', '!=', 0)]}" />
                </xpath>
            </field>
        </record>
    </data>
</odoo>
