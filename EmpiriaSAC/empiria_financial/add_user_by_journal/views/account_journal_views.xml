<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="add_field_assign_to_inherit_view_form" model="ir.ui.view">
        <field name="name">add_field_assign_to_inherit_view_form</field>
        <field name="model">account.journal</field>
        <field name="inherit_id" ref="account.view_account_journal_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='group_alias_edit']" position="after">
                <group name="assign">
                    <field name="assign_to_ids" groups="add_user_by_journal.res_groups_admin_journal_access" widget="many2many_tags"/>
                </group>
            </xpath>
        </field>
    </record>

    <record id="ir_rule_account_journal_filter_by_user" model="ir.rule">
        <field name="name">Journal: Filter allowed Users</field>
        <field name="model_id" ref="account.model_account_journal"/>
        <field name="domain_force">[('assign_to_ids', 'in', [user.id])]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="ir_rule_account_journal_admin" model="ir.rule">
        <field name="name">Journal: Allowed Users admin</field>
        <field name="model_id" ref="account.model_account_journal"/>
        <field name="domain_force">[]</field>
        <field name="groups" eval="[(4, ref('add_user_by_journal.res_groups_admin_journal_access'))]"/>
    </record>

</odoo>